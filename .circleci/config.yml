version: 2.1
orbs:
  node: circleci/node
  cypress: cypress-io/cypress@2
workflows:
  build:
    jobs:
      build:
        docker:
          - image: cimg/node:19.6.0
        steps:
          - checkout
          - run: node --version
      - cypress/install:
          install-command: yarn install --frozen-lockfile --ignore-engines
      - cypress/run:
          store_artifacts: true
          yarn: true
          start: yarn install && yarn cypress run --headless --component
          no-workspace: true
          requires:
            - cypress/install
